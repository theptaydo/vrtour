<!DOCTYPE html>
<html>

<head>
  <title>VR Tour - Tay Do Steel</title>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
  <link type="text/css" rel="Stylesheet" href="./src/css/pannellum.css" />
  <script type="text/javascript" src="./src/js/libpannellum.js"></script>
  <script type="text/javascript" src="./src/js/pannellum.js"></script>

  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.0/jquery.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.0.0/js/bootstrap.min.js"
    crossorigin="anonymous"></script>
  <link rel='stylesheet' href='https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.0.0/css/bootstrap.css'>
  <link rel="stylesheet" src="./src/my-vr-tour.css">
  <script type="text/javascript" src="./src/my-vr-tour.js"></script>
  <style>
    /* Make #panorama full-width and full-height on all devices */
    #panorama {
      width: 100vw;
      height: 100vh;
      overflow: hidden;
      position: relative;
    }

    /* Style for the controls */
    #controls {
      position: absolute;
      bottom: 10px;
      z-index: 2;
      text-align: center;
      width: 100%;
      padding-bottom: 3px;
    }

    .ctrl {
      padding: 8px 5px;
      width: 30px;
      text-align: center;
      background: rgba(200, 200, 200, 0.8);
      display: inline-block;
      cursor: pointer;
    }

    .ctrl:hover {
      background: rgba(200, 200, 200, 1);
    }
  </style>
</head>

<body>
  <div id="panorama">
    <div id="controls">
      <div class="ctrl" id="pan-up">&#9650;</div>
      <div class="ctrl" id="pan-down">&#9660;</div>
      <div class="ctrl" id="pan-left">&#9664;</div>
      <div class="ctrl" id="pan-right">&#9654;</div>
      <div class="ctrl" id="zoom-in">&plus;</div>
      <div class="ctrl" id="zoom-out">&minus;</div>
      <div class="ctrl" id="fullscreen">&#x2922;</div>
    </div>
  </div>

  <script>
    const viewer = pannellum.viewer("panorama", {
      default: {
        firstScene: "main",
        autoLoad: true,
        author: "Dang Tran",
      },
      scenes: {
        main: {
          title: "Sân chính - Tây Đô Steel",
          panorama: "./assets/main.png",
          hotSpots: [{
            pitch: -6.419552350621027,
            yaw: -169.70078810534096,
            type: "scene",
            text: "Quầy lễ tân",
            sceneId: "reception",
          },
          {
            pitch: -5.358857289127068,
            yaw: 100.11053018621715,
            type: "scene",
            text: "Thăm sân vườn",
            sceneId: "garden",
          }
          ],
        },
        reception: {
          title: "Quầy lễ tân",
          panorama: "./assets/le-tan.png",
          hotSpots: [
            {
              pitch: -5.358857289127068,
              yaw: 100.11053018621715,
              type: "scene",
              text: "Thăm sân vườn",
              sceneId: "garden",
            }
          ],
        },
        garden: {
          title: "Sân vườn - Tây Đô Steel",
          panorama: "./assets/san-vuon.png",
          hotSpots: [{
            pitch: -8.339623345269096,
            yaw: 135.59748586018884,
            type: "scene",
            text: "Thăm hội trường",
            sceneId: "hallFront",
          },
          {
            pitch: -5.210206210553617,
            yaw: 7.77110141894002,
            type: "scene",
            text: "Vào nhà mát",
            sceneId: "gazebo",
          },
          // {
          //   pitch: -2.679228040907118,
          //   yaw: 166.86788643731006,
          //   type: "scene",
          //   text: "Phòng server",
          //   sceneId: "server",
          // },
          {
            pitch: -8.035659500287561,
            yaw: -105.98740132649743,
            type: "scene",
            text: "Về sân chính",
            sceneId: "main",
          }
          ],
        },
        server: {
          title: "Phòng server",
          panorama: "./assets/server.png",
          hotSpots: [{
            pitch: -5,
            yaw: 170,
            type: "scene",
            text: "Ra nhà mát",
            sceneId: "gazebo",
          }],
        },
        gazebo: {
          title: "Nhà mát",
          panorama: "./assets/nha-mat.png",
          hotSpots: [{
            pitch: -5,
            yaw: 170,
            type: "scene",
            text: "Thăm hội trường",
            sceneId: "hallFront",
          }],
        },
        // warehouse: {
        //   title: "Kho Phôi",
        //   panorama: "../assets/kho-phoi.jpg",
        //   hfov: 110,
        //   minHfov: 80,
        //   maxHfov: 120,
        //   pitch: -5,
        //   hotSpots: [{
        //     pitch: -10,
        //     yaw: 10,
        //     type: "scene",
        //     text: "Thăm sân vườn",
        //     sceneId: "garden",
        //   }],
        // },
        hallFront: {
          title: "Sân hội trường",
          panorama: "./assets/san-hoi-truong.png",
          hotSpots: [{
            pitch: 3.57,
            yaw: 68.8,
            type: "scene",
            text: "Vào hội trường",
            sceneId: "hall",
          },
          {
            pitch: 4.962306552463109,
            yaw: -94.03362626423245,
            type: "scene",
            text: "Thăm Bungalow",
            sceneId: "bungalowBridge",
          }],

        },
        hall: {
          title: "Sân hội trường",
          panorama: "./assets/hoi-truong.png",
          hotSpots: [{
            pitch: 11.603775872124567,
            yaw: -76.93318446210628,
            type: "scene",
            text: "Thăm Bungalow",
            sceneId: "bungalowBridge",
          }],
        },
        bungalowBridge: {
          title: "Cầu Bungalow",
          panorama: "./assets/bungalow-bridge.png",
          hotSpots: [{
            pitch: -5.8758259029011795,
            yaw: -93.23270246717664,
            type: "scene",
            text: "Về sân vườn",
            sceneId: "garden",
          }],
        },

      },


    });


    // Kiểm tra nếu là thiết bị di động thì phóng to bằng cách giảm hfov
    if (window.innerWidth < 768) {
      viewer.setHfov(60); // Giảm hfov để phóng to hình ảnh
    }
    if (/Mobi|Android|iPhone|iPad|iPod/i.test(navigator.userAgent)) {
      viewer.setHfov(50); // Giảm hfov để phóng to hình ảnh
    }


    // Make control buttons work
    document.getElementById("pan-up").addEventListener("click", () => viewer.setPitch(viewer.getPitch() + 10));
    document.getElementById("pan-down").addEventListener("click", () => viewer.setPitch(viewer.getPitch() - 10));
    document.getElementById("pan-left").addEventListener("click", () => viewer.setYaw(viewer.getYaw() - 10));
    document.getElementById("pan-right").addEventListener("click", () => viewer.setYaw(viewer.getYaw() + 10));
    document.getElementById("zoom-in").addEventListener("click", () => {
      viewer.setHfov(viewer.getHfov() - 10);
      // alert(viewer.getHfov());
    });
    document.getElementById("zoom-out").addEventListener("click", () => viewer.setHfov(viewer.getHfov() + 10));
    document.getElementById("fullscreen").addEventListener("click", () => viewer.toggleFullscreen());

    // Thêm sự kiện nhấp chuột để lấy tọa độ pitch và yaw tại vị trí nhấp
    document.getElementById("panorama").addEventListener("click", function () {
      const currentPitch = viewer.getPitch();
      const currentYaw = viewer.getYaw();
      console.log("Pitch:", currentPitch, "Yaw:", currentYaw);
    });
  </script>
</body>

</html>